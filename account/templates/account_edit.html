{% extends "warehouse_template.html" %}
{% load crispy_forms_tags %}
{% block title %}编辑用户{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">用户编辑</h3>
                </div>
                <div class="panel-body">
                    <form method="post" action="{% url 'account_edit' id=id %}" role="form">{% csrf_token %}
                        {{ form.non_field_errors }}
                        <div class="form-group">
                            {{ form.id.label_tag }}{{ form.id.field}}
                        </div>
                        <div class="form-group">
                            {{ form.username.errors }}
                            {{ form.username.label_tag }}
                            {{ form.username }}
                            {% if form.username.help_text %}
                                <p class="help-block">{{ form.username.help_text|safe }}</p>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {{ form.nickname.errors }}
                            {{ form.nickname.label_tag }}{{ form.nickname }}
                            {% if form.nickname.help_text %}
                                <p class="help-block">{{ form.nickname.help_text|safe }}</p>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {{ form.last_name.errors }}
                            {{ form.last_name.label_tag }}{{ form.last_name}}
                            {% if form.last_name.help_text %}
                                <p class="help-block">{{ form.last_name.help_text|safe }}</p>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {{ form.first_name.errors }}
                            {{ form.first_name.label_tag }}{{ form.first_name}}
                            {% if form.first_name.help_text %}
                                <p class="help-block">{{ form.first_name.help_text|safe }}</p>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {{ form.phone.errors }}
                            {{ form.phone.label_tag }}{{ form.phone}}
                            {% if form.phone.help_text %}
                                <p class="help-block">{{ form.phone.help_text|safe }}</p>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {{ form.email.errors }}
                            {{ form.email.label_tag }}{{ form.email}}
                            {% if form.email.help_text %}
                                <p class="help-block">{{ form.email.help_text|safe }}</p>
                            {% endif %}
                        </div>
                        {% if user.is_staff and perms.account %}
                        <div class="form-group">
                            {{ form.is_staff.errors }}
                            {{ form.is_staff.label_tag }}{{ form.is_staff}}
                            {% if form.is_staff.help_text %}
                                <p class="help-block">{{ form.is_staff.help_text|safe }}</p>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {{ form.company.errors }}
                            {{ form.company.label_tag }}{{ form.company}}
                            {% if form.company.help_text %}
                                <p class="help-block">{{ form.company.help_text|safe }}</p>
                            {% endif %}
                        </div>
                        {% else %}
                            <input type="hidden" name="company" value='{{ form.company.value }}'>
                            <input type="hidden" name="is_staff" value='{{ form.is_staff.value }}'>
                        {% endif %}
                        <div class="form-group">
                            {{ form.groups.errors }}
                            {{ form.groups.label_tag }}{{ form.groups}}
                            {% if form.groups.help_text %}
                                <p class="help-block">{{ form.groups.help_text|safe }}管理员可以创建操作员账户，请谨慎创建管理员账户。</p>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {{ form.is_active.errors }}
                            {{ form.is_active.label_tag }}{{ form.is_active}}
                            {% if form.is_active.help_text %}
                                <p class="help-block">{{ form.is_active.help_text|safe }}非激活账户相当于删除，只是需要启用时可以再次激活。</p>
                            {% endif %}
                        </div>

                        <button class="btn btn-default" type="submit">提交</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <style type="text/css">
    .errorlist{
        background-color: #f0ad4e !important;
    }
    label {
        float:left;
        text-align: left;
        width: 150px;
    }
    </style>
{% endblock %}